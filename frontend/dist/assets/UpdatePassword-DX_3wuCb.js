import{c as P,j as o,a as s,e as a,g as M,w as k,U as l,n as v,m as B,V as O}from"./vendor-DRWF_35v.js";import{a as A,s as E,b as U,u as W,C as e,F as L,E as V,e as z}from"./index-Cyj1GRGR.js";import{C as D}from"./CustomSnackbar-MfbZEKOq.js";import{V as j}from"./Visibility-pfvla3G9.js";import"./stripe-huBLJZ7y.js";const y=P(o.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock"),S=P(o.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");function J(){const{loading:g,error:t,isUpdated:f,isAuthenticated:b}=A(r=>({loading:r.authState.loading,error:r.authState.error,isUpdated:r.authState.isUpdated,isAuthenticated:r.authState.isAuthenticated}),E),[c,m]=s.useState(""),[u,w]=s.useState(""),[p,C]=s.useState(!1),[x,$]=s.useState(!1),[n,i]=s.useState({open:!1,message:"",severity:"success"}),d=U(),h=W(),G=r=>{if(r.preventDefault(),!c.trim()||!u.trim()){i({open:!0,message:"Please enter both old and new passwords",severity:"error"});return}d(L({oldPassword:c,password:u}))},I=()=>{i({...n,open:!1}),n.severity==="success"&&d(V()),n.severity==="error"&&(d(z()),(t==="Login first to handle this resource"||t==="User not found")&&h("/login"))};return s.useEffect(()=>{if(!b){h("/login");return}f&&(i({open:!0,message:"Password updated successfully",severity:"success"}),m(""),w("")),t&&i({open:!0,message:t,severity:"error"})},[f,t,d,b,h]),o.jsxs(a,{sx:{background:e.deepBlack,color:e.white,minHeight:"100vh",p:8,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"50%",background:`linear-gradient(135deg, ${e.seagreen} 0%, ${e.orangered} 100%)`,clipPath:"polygon(30% 0, 100% 60%, 10% 60%, 0 100%)",opacity:.9,zIndex:0,animation:"pulse 4s infinite alternate","@keyframes pulse":{"0%":{opacity:.7,transform:"scale(1)"},"100%":{opacity:1,transform:"scale(1.05)"}}}},children:[o.jsxs(a,{sx:{mt:8,textAlign:"center",zIndex:1,position:"relative"},children:[o.jsx(a,{sx:{mb:8},children:o.jsxs(M,{variant:"h3",sx:{fontWeight:900,fontFamily:"'Orbitron', sans-serif",fontSize:"2.8rem",textTransform:"uppercase",letterSpacing:"2px",background:`linear-gradient(90deg, ${e.shaft}, ${e.neonPink})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:`0 0 20px ${e.neonGreen}80`,"& span":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.seagreen})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},children:["Update ",o.jsx("span",{children:"Password"})]})}),o.jsx(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,background:`${e.darkGray}E6`,borderRadius:"16px",border:`1px solid ${e.neonGreen}33`,backdropFilter:"blur(10px)",boxShadow:`0 0 25px ${e.warning}4D`,padding:4,maxWidth:600,mx:"auto","&:hover":{boxShadow:`0 0 35px ${e.neonGreen}B3`}},children:o.jsxs(a,{component:"form",onSubmit:G,sx:{display:"flex",flexDirection:"column",gap:3,width:"100%"},children:[o.jsx(k,{label:"Old Password",variant:"outlined",type:p?"text":"password",value:c,onChange:r=>m(r.target.value),fullWidth:!0,InputProps:{startAdornment:o.jsx(l,{position:"start",children:o.jsx(y,{sx:{color:e.neonGreen}})}),endAdornment:o.jsx(l,{position:"end",children:o.jsx(v,{onClick:()=>C(!p),edge:"end",children:p?o.jsx(S,{sx:{color:e.neonGreen}}):o.jsx(j,{sx:{color:e.neonGreen}})})})},sx:{"& .MuiOutlinedInput-root":{background:`${e.deepBlack}E6`,color:e.white,"& fieldset":{borderColor:e.neonGreen},"&:hover fieldset":{borderColor:e.neonPink},"&.Mui-focused fieldset":{borderColor:e.orangered}},"& .MuiInputLabel-root":{color:e.neonGreen},"& .MuiInputLabel-root.Mui-focused":{color:e.orangered}}}),o.jsx(k,{label:"New Password",variant:"outlined",type:x?"text":"password",value:u,onChange:r=>w(r.target.value),fullWidth:!0,InputProps:{startAdornment:o.jsx(l,{position:"start",children:o.jsx(y,{sx:{color:e.neonGreen}})}),endAdornment:o.jsx(l,{position:"end",children:o.jsx(v,{onClick:()=>$(!x),edge:"end",children:x?o.jsx(S,{sx:{color:e.neonGreen}}):o.jsx(j,{sx:{color:e.neonGreen}})})})},sx:{"& .MuiOutlinedInput-root":{background:`${e.deepBlack}E6`,color:e.white,"& fieldset":{borderColor:e.neonGreen},"&:hover fieldset":{borderColor:e.neonPink},"&.Mui-focused fieldset":{borderColor:e.orangered}},"& .MuiInputLabel-root":{color:e.neonGreen},"& .MuiInputLabel-root.Mui-focused":{color:e.orangered}}}),o.jsx(B,{type:"submit",variant:"contained",disabled:g,sx:{background:`linear-gradient(90deg, ${e.neonGreen}, ${e.teal})`,color:e.white,padding:"10px 0",borderRadius:"12px",boxShadow:`0 0 10px ${e.neonGreen}80`,fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase","&:hover":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.orangered})`,boxShadow:`0 0 15px ${e.neonPink}B3`,transform:"scale(1.05)"},"&:disabled":{background:e.darkGray,cursor:"not-allowed",boxShadow:"none"},transition:"all 0.3s ease"},children:g?o.jsx(O,{size:24,color:"inherit"}):"Update Password"})]})})]}),o.jsx(D,{open:n.open,message:n.message,severity:n.severity,handleClose:I})]})}export{J as default};
