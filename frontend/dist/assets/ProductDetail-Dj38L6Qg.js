import{c as O,j as n,e as t,g as i,q as G,y as I,n as P,w as B,z as V,m as j,a as l,E as X}from"./vendor-DRWF_35v.js";import{C as e,i as Z,b as ee,u as ne,a as y,m as R,L as re,n as oe,o as te,p as ae,q as se}from"./index-Cyj1GRGR.js";import{C as F}from"./CustomSnackbar-MfbZEKOq.js";import{R as ie,A as le}from"./Remove-D4bwaAw_.js";import"./stripe-huBLJZ7y.js";const de=O(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 13.5L7.5 11l1.42-1.41L12 12.67l3.08-3.08L16.5 11z"}),"ExpandCircleDown"),ce=O(n.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),xe=({reviews:a})=>n.jsxs(t,{sx:{width:"75%",mx:"auto",mt:4},children:[n.jsx(i,{variant:"h6",gutterBottom:!0,sx:{fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase",background:`linear-gradient(90deg, ${e.shaft}, ${e.neonPink})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:`0 0 10px ${e.neonGreen}80`},children:"Other's Reviews"}),n.jsx(G,{sx:{my:2,borderColor:`${e.neonGreen}33`,width:"200px",boxShadow:`0 0 5px ${e.neonGreen}80`}}),a&&a.length>0?a.map(o=>n.jsxs(t,{sx:{my:3},children:[n.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:1},children:[n.jsx(I,{value:o.rating,readOnly:!0,precision:.5,sx:{"& .MuiRating-iconFilled":{color:e.neonGreen},"& .MuiRating-iconEmpty":{color:`${e.shaft}80`}}}),n.jsxs(i,{variant:"body2",sx:{ml:2,fontFamily:"'Orbitron', sans-serif",fontWeight:"bold",color:e.shaft},children:["by ",o.user?o.user.name:"Unknown User"]})]}),n.jsx(i,{variant:"body2",sx:{fontFamily:"'Orbitron', sans-serif",color:e.neonGreen},children:o.comment}),n.jsx(G,{sx:{my:2,borderColor:`${e.neonGreen}33`,width:"200px",boxShadow:`0 0 5px ${e.neonGreen}80`}})]},o._id)):n.jsx(i,{variant:"body2",sx:{fontFamily:"'Orbitron', sans-serif",color:`${e.neonGreen}80`},children:"No reviews available."})]}),be=({images:a,selectedImage:o,onImageClick:x})=>n.jsxs(t,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[a.length>1&&n.jsx(t,{sx:{display:"flex",flexDirection:"column",gap:1},children:a.map((c,d)=>n.jsx(t,{component:"img",src:c,alt:`Product Image ${d+1}`,sx:{width:64,height:64,objectFit:"contain",borderRadius:"8px",border:d===o?`2px solid ${e.neonPink}`:`1px solid ${e.darkGray}`,boxShadow:d===o?`0 0 10px ${e.neonPink}80`:"none",cursor:"pointer",transition:"all 0.3s ease","&:hover":{border:`2px solid ${e.neonGreen}`,boxShadow:`0 0 10px ${e.neonGreen}80`}},onClick:()=>x(d)},d))}),n.jsx(t,{component:"img",src:a[o],alt:"Main Product",sx:{width:{xs:"100%",md:"400px"},height:"auto",borderRadius:"12px",border:`1px solid ${e.neonGreen}33`,boxShadow:`0 0 20px ${e.warning}80`,transition:"transform 0.4s ease","&:hover":{transform:"scale(1.05)",boxShadow:`0 0 30px ${e.neonGreen}B3`}}})]}),he=({quantity:a,onIncrease:o,onDecrease:x,stock:c})=>n.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[n.jsx(P,{onClick:x,sx:{background:`linear-gradient(90deg, ${e.neonPink}, ${e.orangered})`,color:e.white,borderRadius:"8px",boxShadow:`0 0 10px ${e.neonPink}80`,"&:hover":{background:`linear-gradient(90deg, ${e.orangered}, ${e.neonPink})`,boxShadow:`0 0 15px ${e.neonPink}B3`,transform:"scale(1.05)"},transition:"all 0.3s ease"},children:n.jsx(ie,{})}),n.jsx(B,{size:"small",value:a,inputProps:{readOnly:!0,style:{textAlign:"center"}},sx:{width:60,"& .MuiOutlinedInput-root":{background:`${e.deepBlack}E6`,color:e.white,fontFamily:"'Orbitron', sans-serif","& fieldset":{borderColor:e.neonGreen},"&:hover fieldset":{borderColor:e.neonPink},"&.Mui-focused fieldset":{borderColor:e.orangered}},"& .MuiInputLabel-root":{color:e.neonGreen},"& .MuiInputLabel-root.Mui-focused":{color:e.orangered}}}),n.jsx(P,{onClick:o,disabled:c===0||a>=c,sx:{background:`linear-gradient(90deg, ${e.neonGreen}, ${e.teal})`,color:e.white,borderRadius:"8px",boxShadow:`0 0 10px ${e.neonGreen}80`,"&:hover":{background:`linear-gradient(90deg, ${e.teal}, ${e.neonGreen})`,boxShadow:`0 0 15px ${e.neonGreen}B3`,transform:"scale(1.05)"},"&:disabled":{background:e.darkGray,boxShadow:"none",cursor:"not-allowed"},transition:"all 0.3s ease"},children:n.jsx(le,{})})]}),ue=({open:a,onClose:o,onSubmit:x,rating:c,setRating:d,comment:u,setComment:g})=>n.jsx(V,{open:a,onClose:o,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:n.jsxs(t,{sx:{background:`${e.darkGray}E6`,p:4,borderRadius:"16px",border:`1px solid ${e.neonGreen}33`,backdropFilter:"blur(10px)",boxShadow:`0 0 25px ${e.warning}4D`,width:400,color:e.white,"&:hover":{boxShadow:`0 0 35px ${e.neonGreen}B3`}},children:[n.jsx(i,{variant:"h6",gutterBottom:!0,sx:{fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase",background:`linear-gradient(90deg, ${e.shaft}, ${e.neonPink})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:`0 0 10px ${e.neonGreen}80`},children:"Submit Your Review"}),n.jsx(I,{value:c,onChange:(h,p)=>d(p),sx:{"& .MuiRating-iconFilled":{color:e.neonGreen},"& .MuiRating-iconEmpty":{color:`${e.shaft}80`},mb:2}}),n.jsx(B,{fullWidth:!0,multiline:!0,rows:2,variant:"outlined",label:"Comment",value:u,onChange:h=>g(h.target.value),sx:{mt:2,"& .MuiOutlinedInput-root":{background:`${e.deepBlack}E6`,color:e.white,fontFamily:"'Orbitron', sans-serif","& fieldset":{borderColor:e.neonGreen},"&:hover fieldset":{borderColor:e.neonPink},"&.Mui-focused fieldset":{borderColor:e.orangered}},"& .MuiInputLabel-root":{color:e.neonGreen},"& .MuiInputLabel-root.Mui-focused":{color:e.orangered}}}),n.jsx(j,{variant:"contained",onClick:x,sx:{mt:2,background:`linear-gradient(90deg, ${e.neonGreen}, ${e.teal})`,color:e.white,padding:"10px 20px",borderRadius:"12px",boxShadow:`0 0 10px ${e.neonGreen}80`,fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase","&:hover":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.orangered})`,boxShadow:`0 0 15px ${e.neonPink}B3`,transform:"scale(1.05)"},transition:"all 0.3s ease"},children:"Submit"})]})}),we=()=>{const[a,o]=l.useState(1),[x,c]=l.useState(0),[d,u]=l.useState(!1),[g,h]=l.useState(0),[p,f]=l.useState(""),{id:m}=Z(),b=ee(),M=ne(),{loading:T,product:r,isReviewSubmitted:$,error:S,Snackbar:k}=y(s=>s.productState),{user:v}=y(s=>s.authState),{Snackbar:w}=y(s=>s.cartState);l.useEffect(()=>{b(R(m))},[b,m]),l.useEffect(()=>{(r==null?void 0:r.stock)===0?o(0):a>(r==null?void 0:r.stock)&&o(r==null?void 0:r.stock)},[r==null?void 0:r.stock,a]);const W=l.useCallback(()=>{o(s=>s<(r==null?void 0:r.stock)?s+1:s)},[r==null?void 0:r.stock]),E=l.useCallback(()=>{o(s=>s>1?s-1:s)},[]),D=l.useCallback(s=>c(s),[]),L=()=>{if(!v)return M("/login");b(oe({productId:r._id,quantity:a}))},z=()=>{!g||!p.trim()||b(te({rating:g,comment:p,productId:m})).then(()=>{b(R(m)),u(!1),h(0),f("")})},A=()=>{b(ae())},Q=()=>{b(se())};l.useEffect(()=>{$&&(h(0),f(""))},[$]);const{_id:Y,name:N,description:_,price:q,seller:U,stock:C,images:H,ratings:J,numOfReviews:K}=r||{};return T?n.jsx(re,{}):S?n.jsx(t,{sx:{p:4,textAlign:"center"},children:n.jsx(X,{severity:"error",children:S})}):n.jsxs(t,{sx:{background:e.deepBlack,color:e.white,minHeight:"100vh",p:8,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"50%",background:`linear-gradient(135deg, ${e.seagreen} 0%, ${e.orangered} 100%)`,clipPath:"polygon(30% 0, 100% 60%, 10% 60%, 0 100%)",opacity:.9,zIndex:0,animation:"pulse 4s infinite alternate","@keyframes pulse":{"0%":{opacity:.7,transform:"scale(1)"},"100%":{opacity:1,transform:"scale(1.05)"}}}},children:[n.jsx(F,{open:k.open,message:k.message,severity:k.severity,handleClose:A}),n.jsx(F,{open:w.open,message:w.message,severity:w.severity,handleClose:Q}),n.jsxs(t,{sx:{mt:8,zIndex:1,position:"relative"},children:[n.jsx(t,{sx:{mb:8,textAlign:"center"},children:n.jsx(i,{variant:"h3",sx:{fontWeight:900,fontFamily:"'Orbitron', sans-serif",fontSize:"2.8rem",textTransform:"uppercase",letterSpacing:"2px",background:`linear-gradient(90deg, ${e.shaft}, ${e.neonPink})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:`0 0 20px ${e.neonGreen}80`},children:N})}),n.jsxs(t,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4,alignItems:{xs:"center",md:"flex-start"},justifyContent:{xs:"center",md:"space-between"},background:`${e.darkGray}E6`,borderRadius:"16px",border:`1px solid ${e.neonGreen}33`,backdropFilter:"blur(10px)",boxShadow:`0 0 25px ${e.warning}4D`,padding:4,"&:hover":{boxShadow:`0 0 35px ${e.neonGreen}B3`}},children:[n.jsx(be,{images:H||[],selectedImage:x,onImageClick:D}),n.jsxs(t,{sx:{flex:1,mt:{xs:4,md:0},maxWidth:"600px"},children:[n.jsxs(i,{sx:{fontFamily:"'Orbitron', sans-serif"},children:["Product # ",Y]}),n.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:2},children:[n.jsx(ce,{sx:{color:e.neonGreen}}),n.jsxs(i,{variant:"body2",sx:{ml:1,fontFamily:"'Orbitron', sans-serif"},children:[J||0,n.jsxs("span",{style:{color:e.orangered},children:[" ","(",K||0," reviews)"]})]})]}),n.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{fontFamily:"'Orbitron', sans-serif"},children:["$ ",n.jsx("span",{style:{color:e.orangered},children:q})]}),n.jsx(he,{quantity:a,onIncrease:W,onDecrease:E,stock:C}),n.jsx(j,{variant:"contained",disabled:(r==null?void 0:r.stock)===0,onClick:L,sx:{background:`linear-gradient(90deg, ${e.neonGreen}, ${e.teal})`,color:e.white,padding:"10px 20px",borderRadius:"12px",boxShadow:`0 0 10px ${e.neonGreen}80`,fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase","&:hover":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.orangered})`,boxShadow:`0 0 15px ${e.neonPink}B3`,transform:"scale(1.05)"},"&:disabled":{background:e.darkGray,cursor:"not-allowed",boxShadow:"none"},transition:"all 0.3s ease",mt:2},children:"Add To Cart"}),n.jsxs(i,{variant:"body2",sx:{mt:2,fontFamily:"'Orbitron', sans-serif"},children:["Status: ",n.jsx("b",{children:C>0?"In Stock":"Out of Stock"})]}),n.jsxs(i,{variant:"body2",sx:{mt:2,fontFamily:"'Orbitron', sans-serif"},children:["Sold by: ",n.jsx("b",{children:U})]}),n.jsx(i,{variant:"body2",sx:{mt:2,fontFamily:"'Orbitron', sans-serif"},children:"Description:"}),n.jsx(i,{variant:"body2",sx:{color:e.neonGreen,fontFamily:"'Orbitron', sans-serif"},children:_}),v?n.jsxs(t,{sx:{mt:4},children:[n.jsxs(j,{variant:"contained",onClick:()=>u(!0),sx:{background:`linear-gradient(90deg, ${e.neonGreen}, ${e.teal})`,color:e.white,padding:"10px 20px",borderRadius:"12px",boxShadow:`0 0 10px ${e.neonGreen}80`,fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase","&:hover":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.orangered})`,boxShadow:`0 0 15px ${e.neonPink}B3`,transform:"scale(1.05)"},transition:"all 0.3s ease"},children:["Submit Review",n.jsx(de,{sx:{ml:1,fontSize:26}})]}),n.jsx(ue,{open:d,onClose:()=>u(!1),onSubmit:z,rating:g,setRating:h,comment:p,setComment:f})]}):n.jsx(i,{sx:{mt:2,fontFamily:"'Orbitron', sans-serif"},children:"Please log in to submit a review."})]}),n.jsx(t,{sx:{mt:4},children:r&&r.reviews&&r.reviews.length>0?n.jsx(xe,{reviews:r.reviews}):n.jsx(i,{sx:{fontFamily:"'Orbitron', sans-serif"},children:"No reviews yet."})})]})]})]})};export{we as default};
