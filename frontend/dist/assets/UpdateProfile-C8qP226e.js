import{c as P,j as a,a as o,e as l,g as D,A as F,m as C,w as $,U as j,V as U}from"./vendor-DRWF_35v.js";import{a as W,s as L,b as T,u as R,C as e,P as z,D as H,E as O,e as V}from"./index-Cyj1GRGR.js";import{D as N}from"./defImg-Blmf2ww2.js";import{C as q}from"./CustomSnackbar-MfbZEKOq.js";import"./stripe-huBLJZ7y.js";const J=P(a.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),K=P([a.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),a.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera");function ee(){const{loading:h,error:d,user:n,isUpdated:f,isAuthenticated:m}=W(r=>({loading:r.authState.loading,error:r.authState.error,user:r.authState.user,isUpdated:r.authState.isUpdated,isAuthenticated:r.authState.isAuthenticated}),L),[b,v]=o.useState(""),[k,S]=o.useState(""),[c,I]=o.useState(null),[G,y]=o.useState(N),[A,s]=o.useState(!1),[i,x]=o.useState({open:!1,message:"",severity:"success"}),p=T(),g=R(),E=r=>{const t=r.target.files[0];if(t){const u=new FileReader;u.onload=()=>{u.readyState===2&&(y(u.result),I(t),s(!0))},u.readAsDataURL(t)}},w=(r,t)=>{r==="name"&&t!==(n==null?void 0:n.name)&&s(!0),r==="email"&&t!==(n==null?void 0:n.email)&&s(!0),r==="name"&&t===(n==null?void 0:n.name)&&!c&&s(!1),r==="email"&&t===(n==null?void 0:n.email)&&!c&&s(!1)},M=r=>{r.preventDefault();const t=new FormData;t.append("name",b),t.append("email",k),c&&t.append("avatar",c),p(H(t))},B=()=>{x({...i,open:!1}),i.severity==="success"&&p(O()),i.severity==="error"&&(p(V()),(d==="Login first to handle this resource"||d==="User not found")&&g("/login"))};return o.useEffect(()=>{if(!m){g("/login");return}n&&(v(n.name||""),S(n.email||""),n.avatar&&y(n.avatar)),f&&(x({open:!0,message:"Profile updated successfully",severity:"success"}),s(!1)),d&&x({open:!0,message:d,severity:"error"})},[n,f,d,p,m,g]),a.jsxs(l,{sx:{background:e.deepBlack,color:e.white,minHeight:"100vh",p:8,position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"50%",background:`linear-gradient(135deg, ${e.seagreen} 0%, ${e.orangered} 100%)`,clipPath:"polygon(30% 0, 100% 60%, 10% 60%, 0 100%)",opacity:.9,zIndex:0,animation:"pulse 4s infinite alternate","@keyframes pulse":{"0%":{opacity:.7,transform:"scale(1)"},"100%":{opacity:1,transform:"scale(1.05)"}}}},children:[a.jsxs(l,{sx:{mt:8,textAlign:"center",zIndex:1,position:"relative"},children:[a.jsx(l,{sx:{mb:8},children:a.jsxs(D,{variant:"h3",sx:{fontWeight:900,fontFamily:"'Orbitron', sans-serif",fontSize:"2.8rem",textTransform:"uppercase",letterSpacing:"2px",background:`linear-gradient(90deg, ${e.shaft}, ${e.neonPink})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:`0 0 20px ${e.neonGreen}80`,"& span":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.seagreen})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},children:["Update ",a.jsx("span",{children:"Profile"})]})}),a.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,background:`${e.darkGray}E6`,borderRadius:"16px",border:`1px solid ${e.neonGreen}33`,backdropFilter:"blur(10px)",boxShadow:`0 0 25px ${e.warning}4D`,padding:4,maxWidth:600,mx:"auto","&:hover":{boxShadow:`0 0 35px ${e.neonGreen}B3`}},children:[a.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[a.jsx(F,{src:G,sx:{width:120,height:120,borderRadius:"12px",boxShadow:`0 0 20px ${e.warning}80`,transition:"transform 0.4s ease","&:hover":{transform:"scale(1.05)",boxShadow:`0 0 30px ${e.neonGreen}B3`}}}),a.jsxs(C,{variant:"contained",component:"label",startIcon:a.jsx(K,{}),sx:{background:`linear-gradient(90deg, ${e.neonGreen}, ${e.teal})`,color:e.white,padding:"10px 20px",borderRadius:"12px",boxShadow:`0 0 10px ${e.neonGreen}80`,fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase","&:hover":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.orangered})`,boxShadow:`0 0 15px ${e.neonPink}B3`,transform:"scale(1.05)"},transition:"all 0.3s ease"},children:["Choose Avatar",a.jsx("input",{type:"file",hidden:!0,onChange:E})]})]}),a.jsxs(l,{component:"form",onSubmit:M,encType:"multipart/form-data",sx:{display:"flex",flexDirection:"column",gap:3,width:"100%"},children:[a.jsx($,{label:"Full Name",variant:"outlined",value:b,onChange:r=>{v(r.target.value),w("name",r.target.value)},fullWidth:!0,InputProps:{startAdornment:a.jsx(j,{position:"start",children:a.jsx(z,{sx:{color:e.neonGreen}})})},sx:{"& .MuiOutlinedInput-root":{background:`${e.deepBlack}E6`,color:e.white,"& fieldset":{borderColor:e.neonGreen},"&:hover fieldset":{borderColor:e.neonPink},"&.Mui-focused fieldset":{borderColor:e.orangered}},"& .MuiInputLabel-root":{color:e.neonGreen},"& .MuiInputLabel-root.Mui-focused":{color:e.orangered}}}),a.jsx($,{label:"Email Address",variant:"outlined",type:"email",value:k,onChange:r=>{S(r.target.value),w("email",r.target.value)},fullWidth:!0,InputProps:{startAdornment:a.jsx(j,{position:"start",children:a.jsx(J,{sx:{color:e.neonGreen}})})},sx:{"& .MuiOutlinedInput-root":{background:`${e.deepBlack}E6`,color:e.white,"& fieldset":{borderColor:e.neonGreen},"&:hover fieldset":{borderColor:e.neonPink},"&.Mui-focused fieldset":{borderColor:e.orangered}},"& .MuiInputLabel-root":{color:e.neonGreen},"& .MuiInputLabel-root.Mui-focused":{color:e.orangered}}}),a.jsx(C,{type:"submit",variant:"contained",disabled:!A||h,sx:{background:`linear-gradient(90deg, ${e.neonGreen}, ${e.teal})`,color:e.white,padding:"10px 0",borderRadius:"12px",boxShadow:`0 0 10px ${e.neonGreen}80`,fontFamily:"'Orbitron', sans-serif",fontWeight:700,textTransform:"uppercase","&:hover":{background:`linear-gradient(90deg, ${e.neonPink}, ${e.orangered})`,boxShadow:`0 0 15px ${e.neonPink}B3`,transform:"scale(1.05)"},"&:disabled":{background:e.darkGray,cursor:"not-allowed",boxShadow:"none"},transition:"all 0.3s ease"},children:h?a.jsx(U,{size:24,color:"inherit"}):"Update Profile"})]})]})]}),a.jsx(q,{open:i.open,message:i.message,severity:i.severity,handleClose:B})]})}export{ee as default};
